<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ZeroCommitsAreLava</title>
    <meta name="description" content="Turn your contribution calendar into a lava-running puzzle." />
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3E%F0%9F%94%A5%3C/text%3E%3C/svg%3E"
    />
  </head>
  <body>
    <div id="app">
      <header class="hero">
        <div class="hero-text">
          <div class="brand-row">
            <img class="brand-logo" src="/og/logo.png" alt="ZeroCommitsAreLava logo" width="200" height="200" />
            <div class="brand-copy">
              <h2>Every quiet day is a lava field.</h2>
              <div class="subhead-row">
                <p class="subhead">
                  Load your contribution grid, sprint across the rocks, and see how far you make it.  Increase your score by increasing the length of your sprint.
                </p>
                <img class="brand-badge" src="/og/burnedbutt.png" alt="Lava runner icon" width="144" height="144" />
              </div>
            </div>
          </div>
        </div>
        <div class="hero-panel">
          <form id="game-form" class="panel form-panel">
            <label>
              Provider
              <select id="provider" name="provider">
                <option value="github">GitHub</option>
                <option value="gitlab">GitLab</option>
              </select>
            </label>
            <label>
              Username
              <input id="username" name="username" placeholder="octocat" required />
            </label>
            <label id="yearRow">
              Year
              <select id="year" name="year"></select>
            </label>
            <label>
              Start week
              <input id="startWeek" name="startWeek" type="date" required />
            </label>
            <label>
              Weeks (1-52)
              <input id="weeks" name="weeks" type="number" min="1" max="52" value="12" required />
            </label>
            <label class="checkbox">
              <input id="hardMode" name="hardMode" type="checkbox" />
              Hard mode (+200)
              <span
                class="tooltip"
                role="img"
                aria-label="Hard mode keeps rock wear between attempts."
                title="Hard mode keeps rock wear between attempts."
              >
                ?
              </span>
            </label>
            <button type="submit" id="playButton">Play</button>
            <p id="formError" class="error"></p>
            <p class="form-note">Only public individual GitHub or GitLab (gitlab.com) accounts work with this game.</p>
          </form>
        </div>
      </header>

      <main class="arena">
        <div class="arena-header">
          <h2>Game Viewer</h2>
          <div class="speed-controls">
            <span>Speed</span>
            <button type="button" data-speed="0.6">Slow</button>
            <button type="button" data-speed="1">Normal</button>
            <button type="button" data-speed="1.6">Fast</button>
          </div>
          <p id="attemptMeta">Load a profile to begin.</p>
        </div>
        <canvas id="gameCanvas" width="1600" height="600"></canvas>
        <div id="scoreModal" class="score-modal" aria-hidden="true">
          <div class="score-panel modal-panel">
            <h2>Best Run</h2>
            <div id="scoreValue" class="score-value">--</div>
            <ul id="scoreBreakdown" class="score-breakdown"></ul>
            <div class="modal-actions">
              <button id="playAgain" class="ghost">Play Again</button>
              <button id="closeScore" class="ghost">Close</button>
            </div>
          </div>
        </div>
        <div class="legend">
          <span><i class="legend-swatch lava"></i> Lava (0)</span>
          <span><i class="legend-swatch shallow"></i> Shallow (1-2)</span>
          <span><i class="legend-swatch solid"></i> Solid (3+)</span>
        </div>
      </main>
      <footer class="site-footer">
        <p class="footer-copy">Â© <span id="footerYear"></span> Aimee Jesso.</p>
        <a
          class="footer-kofi"
          href="https://ko-fi.com/aimeej"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Support on Ko-fi"
        >
          <img src="/kofi.png" alt="" aria-hidden="true" loading="lazy" />
        </a>
      </footer>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
